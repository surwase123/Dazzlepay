!function(e){var t,a={saveSelection:function(){e(this).data("editor").focus(),window.getSelection?(sel=window.getSelection(),sel.getRangeAt&&sel.rangeCount&&e(this).data("currentRange",sel.getRangeAt(0))):document.selection&&document.selection.createRange?e(this).data("currentRange",document.selection.createRange()):e(this).data("currentRange",null)},restoreSelection:function(t,a){var n=e(this).data("currentRange");if(n)if(window.getSelection){if(t)if(n.deleteContents(),"html"==a){var i=document.createElement("div");i.innerHTML=t;for(var o,l=document.createDocumentFragment();o=i.firstChild;)l.appendChild(o);n.insertNode(l)}else n.insertNode(document.createTextNode(t));sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(n)}else document.selection&&n.select&&(n.select(),t&&("html"==a?n.pasteHTML(t):n.text=t))},restoreIESelection:function(){var t=e(this).data("currentRange");t&&(window.getSelection?(sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(t)):document.selection&&t.select&&t.select())},insertTextAtSelection:function(e,t){var a,n;if(window.getSelection){if((a=window.getSelection()).getRangeAt&&a.rangeCount){(n=a.getRangeAt(0)).deleteContents();var i=document.createTextNode(e);if("html"==t){var o=document.createElement("div");o.innerHTML=e;for(var l,r=document.createDocumentFragment();l=o.firstChild;)r.appendChild(l);n.insertNode(r)}else n.insertNode(i),n.selectNode(i);a.removeAllRanges(),(n=n.cloneRange()).collapse(!1),a.addRange(n)}}else document.selection&&document.selection.createRange&&((n=document.selection.createRange()).pasteHTML(e),n.select())},imageWidget:function(){var t=this.attr("id"),n=e("<div/>",{class:"row"}).append(e("<div/>",{id:"imgErrMsg_"+t})),i=e("<div/>",{class:"tabbable tabs-left"}),o=e("<ul/>",{class:"nav nav-tabs"}).append(e("<li/>",{class:"active"}).append(e("<a/>",{href:"#uploadImageBar_"+t,"data-toggle":"tab"}).html("From Computer"))).append(e("<li/>").append(e("<a/>",{href:"#imageFromLinkBar_"+t,"data-toggle":"tab"}).html("From URL"))),l=e("<div/>",{class:"tab-content"}),r=e("<div/>",{id:"uploadImageBar_"+t,class:"tab-pane active"});handleFileSelect=function(n){for(var i,o=n.target.files,l=0;i=o[l];l++)if(i.type.match("image.*")&&i.name.match(/(?:gif|jpg|png|jpeg)$/)){var r=new FileReader;r.onload=function(a){return function(n){var i=e("<li/>",{class:"col-xs-12 col-sm-6 col-md-3 col-lg-3"}),o=e("<a/>",{href:"javascript:void(0)",class:"thumbnail"});e("<img/>",{src:n.target.result,title:escape(a.name)}).appendTo(o).click(function(){e("#imageList_"+t).data("current",e(this).attr("src"))});i.append(o).appendTo(e("#imageList_"+t))}}(i),r.readAsDataURL(i)}else a.showMessage.apply(this,["imgErrMsg_"+t,"Invalid file type"])};var s=e("<input/>",{type:"file",class:"inline-form-control",multiple:"multiple"});s.on("change",handleFileSelect),r.append(s);var d=e("<div/>",{id:"imageFromLinkBar_"+t,class:"tab-pane"}),c=e("<div/>",{class:"input-group"});e("<input/>",{type:"url",class:"form-control",id:"imageURL_"+t,placeholder:"Enter URL"}).appendTo(c),e("<button/>",{class:"btn btn-success",type:"button"}).html("Go!").click(function(){var n=e("#imageURL_"+t).val();if(""==n)return a.showMessage.apply(this,["imgErrMsg_"+t,"Please enter image url"]),!1;var i=e("<li/>",{class:"span6 col-xs-12 col-sm-6 col-md-3 col-lg-3"}),o=e("<a/>",{href:"javascript:void(0)",class:"thumbnail"});e("<img/>",{src:n}).error(function(){return a.showMessage.apply(this,["imgErrMsg_"+t,"Invalid image url"]),!1}).load(function(){e(this).appendTo(o).click(function(){e("#imageList_"+t).data("current",e(this).attr("src"))}),i.append(o).appendTo(e("#imageList_"+t))})}).appendTo(e("<span/>",{class:"input-group-btn form-control-button-right"}).appendTo(c));d.append(c),l.append(r).append(d),i.append(o).append(l);var p=e("<div/>",{class:"col-xs-12 col-sm-12 col-md-12 col-lg-12"});e("<ul/>",{class:"thumbnails padding-top list-unstyled",id:"imageList_"+t}).appendTo(p);return n.append(i).append(p),n},tableWidget:function(a){var n="_"+e(this).attr("id");return void 0!==a&&(n="_"+t.attr("id")+"_Edt"),e("<div/>",{class:"row-fluid"}).append(e("<div/>",{id:"tblErrMsg"+n})).append(e("<form/>",{id:"tblForm"+n}).append(e("<div/>",{class:"row"}).append(e("<div/>",{id:"tblInputsLeft"+n,class:"col-xs-12 col-sm-6 col-md-6 col-lg-6"}).append(e("<label/>",{for:"tblRows"+n,text:"Rows"})).append(e("<input/>",{id:"tblRows"+n,type:"text",class:"form-control form-control-width",value:2})).append(e("<label/>",{for:"tblColumns"+n,text:"Columns"})).append(e("<input/>",{id:"tblColumns"+n,type:"text",class:"form-control form-control-width",value:2})).append(e("<label/>",{for:"tblWidth"+n,text:"Width"})).append(e("<input/>",{id:"tblWidth"+n,type:"text",class:"form-control form-control-width",value:400})).append(e("<label/>",{for:"tblHeight"+n,text:"Height"})).append(e("<input/>",{id:"tblHeight"+n,type:"text",class:"form-control form-control-width"}))).append(e("<div/>",{id:"tblInputsRight"+n,class:"col-xs-12 col-sm-6 col-md-6 col-lg-6"}).append(e("<label/>",{for:"tblAlign"+n,text:"Alignment"})).append(e("<select/>",{id:"tblAlign"+n,class:"form-control form-control-width"}).append(e("<option/>",{text:"Choose",value:""})).append(e("<option/>",{text:"Left",value:"left"})).append(e("<option/>",{text:"Center",value:"center"})).append(e("<option/>",{text:"Right",value:"right"}))).append(e("<label/>",{for:"tblBorder"+n,text:"Border size"})).append(e("<input/>",{id:"tblBorder"+n,type:"text",class:"form-control form-control-width",value:1})).append(e("<label/>",{for:"tblCellspacing"+n,text:"Cell spacing"})).append(e("<input/>",{id:"tblCellspacing"+n,type:"text",class:"form-control form-control-width",value:1})).append(e("<label/>",{for:"tblCellpadding"+n,text:"Cell padding"})).append(e("<input/>",{id:"tblCellpadding"+n,type:"text",class:"form-control form-control-width",value:1})))))},imageAttributeWidget:function(){return e("<div/>",{class:"row-fluid"}).append(e("<div/>",{id:"imageErrMsg"})).append(e("<input/>",{id:"imgAlt",type:"text",class:"form-control form-control-link ",placeholder:"Alt Text"})).append(e("<input/>",{id:"imgTarget",class:"form-control form-control-link ",type:"text",placeholder:"Link Target"})).append(e("<input/>",{id:"imgHidden",type:"hidden"}))},getHTMLTable:function(t,a,n){for(var i=e("<table/>",{class:"table"}),o=0;o<n.length;o++)""!=n[o].value&&("width"==n[o].attribute||"height"==n[o].attribute?i.css(n[o].attribute,n[o].value):i.attr(n[o].attribute,n[o].value));for(o=1;o<=t;o++){for(var l=e("<tr/>"),r=1;r<=a;r++){e("<td/>").html("&nbsp;").appendTo(l)}l.appendTo(i)}return i},init:function(n){void 0!==e(this).attr("id")&&""!==e(this).attr("id")||e(this).attr("id",Date.now());var i=[{name:"Black",hex:"#000000"},{name:"MediumBlack",hex:"#444444"},{name:"LightBlack",hex:"#666666"},{name:"DimBlack",hex:"#999999"},{name:"Gray",hex:"#CCCCCC"},{name:"DimGray",hex:"#EEEEEE"},{name:"LightGray",hex:"#F3F3F3"},{name:"White",hex:"#FFFFFF"},{name:"libreak",hex:null},{name:"Red",hex:"#FF0000"},{name:"Orange",hex:"#FF9900"},{name:"Yellow",hex:"#FFFF00"},{name:"Lime",hex:"#00FF00"},{name:"Cyan",hex:"#00FFFF"},{name:"Blue",hex:"#0000FF"},{name:"BlueViolet",hex:"#8A2BE2"},{name:"Magenta",hex:"#FF00FF"},{name:"libreak",hex:null},{name:"LightPink",hex:"#FFB6C1"},{name:"Bisque",hex:"#FCE5CD"},{name:"BlanchedAlmond",hex:"#FFF2CC"},{name:"LightLime",hex:"#D9EAD3"},{name:"LightCyan",hex:"#D0E0E3"},{name:"AliceBlue",hex:"#CFE2F3"},{name:"Lavender",hex:"#D9D2E9"},{name:"Thistle",hex:"#EAD1DC"},{name:"LightCoral",hex:"#EA9999"},{name:"Wheat",hex:"#F9CB9C"},{name:"NavajoWhite",hex:"#FFE599"},{name:"DarkSeaGreen",hex:"#B6D7A8"},{name:"LightBlue",hex:"#A2C4C9"},{name:"SkyBlue",hex:"#9FC5E8"},{name:"LightPurple",hex:"#B4A7D6"},{name:"PaleVioletRed",hex:"#D5A6BD"},{name:"IndianRed",hex:"#E06666"},{name:"LightSandyBrown",hex:"#F6B26B"},{name:"Khaki",hex:"#FFD966"},{name:"YellowGreen",hex:"#93C47D"},{name:"CadetBlue",hex:"#76A5AF"},{name:"DeepSkyBlue",hex:"#6FA8DC"},{name:"MediumPurple",hex:"#8E7CC3"},{name:"MediumVioletRed",hex:"#C27BA0"},{name:"Crimson",hex:"#CC0000"},{name:"SandyBrown",hex:"#E69138"},{name:"Gold",hex:"#F1C232"},{name:"MediumSeaGreen",hex:"#6AA84F"},{name:"Teal",hex:"#45818E"},{name:"SteelBlue",hex:"#3D85C6"},{name:"SlateBlue",hex:"#674EA7"},{name:"VioletRed",hex:"#A64D79"},{name:"Brown",hex:"#990000"},{name:"Chocolate",hex:"#B45F06"},{name:"GoldenRod",hex:"#BF9000"},{name:"Green",hex:"#38761D"},{name:"SlateGray",hex:"#134F5C"},{name:"RoyalBlue",hex:"#0B5394"},{name:"Indigo",hex:"#351C75"},{name:"Maroon",hex:"#741B47"},{name:"DarkRed",hex:"#660000"},{name:"SaddleBrown",hex:"#783F04"},{name:"DarkGoldenRod",hex:"#7F6000"},{name:"DarkGreen",hex:"#274E13"},{name:"DarkSlateGray",hex:"#0C343D"},{name:"Navy",hex:"#073763"},{name:"MidnightBlue",hex:"#20124D"},{name:"DarkMaroon",hex:"#4C1130"}],o=[{name:"Exclamation ",text:"!"},{name:"At",text:"@"},{name:"Hash",text:"#"},{name:"Percentage",text:"%"},{name:"Uppercase",text:"^"},{name:"Ampersand",text:"&"},{name:"Asterisk",text:"*"},{name:"OpenBracket",text:"("},{name:"CloseBracket",text:")"},{name:"Underscore",text:"_"},{name:"Hiphen",text:"-"},{name:"Plus",text:"+"},{name:"Equalto",text:"="},{name:"OpenSquareBracket",text:"["},{name:"CloseSquareBracket",text:"]"},{name:"OpenCurly",text:"{"},{name:"CloseCurly",text:"}"},{name:"Pipe",text:"|"},{name:"Colon",text:":"},{name:"Semicolon",text:";"},{name:"Single quote",text:"&#39;"},{name:"Double quote",text:"&#34;"},{name:"Left single curly quote",text:"&lsquo;"},{name:"right single curly quote",text:"&rsquo;"},{name:"Forward-slash",text:"&#47;"},{name:"Back-slash",text:"&#92;"},{name:"LessThan",text:"<"},{name:"GreaterThan",text:">"},{name:"QuestionMark",text:"?"},{name:"Tilda",text:"~"},{name:"Grave accent",text:"`"},{name:"Micron",text:"&micro;"},{name:"Paragraph sign",text:"&para;"},{name:"Plus/minus",text:"&plusmn;"},{name:"Trademark",text:"&trade;"},{name:"Copyright",text:"&copy;"},{name:"Registered",text:"&reg;"},{name:"Section",text:"&sect;"},{name:"right double angle quotes",text:"&#187;"},{name:"fraction one quarter",text:"&#188;"},{name:"fraction one half",text:"&#189;"},{name:"fraction three quarters",text:"&#190;"},{name:"Dollar",text:"$"},{name:"Euro",text:"&euro;"},{name:"Pound",text:"&pound;"},{name:"Yen",text:"&yen;"},{name:"Cent",text:"&#162;"},{name:"IndianRupee",text:"&#8377;"}],l={fonteffects:!0,texteffects:!0,aligneffects:!0,textformats:!0,actions:!0,insertoptions:!0,extraeffects:!0,advancedoptions:!0,screeneffects:!0,fonts:{select:!0,default:"Font",tooltip:"Fonts",commandname:"fontName",custom:null},styles:{select:!0,default:"Formatting",tooltip:"Paragraph Format",commandname:"formatBlock",custom:null},font_size:{select:!0,default:"Font size",tooltip:"Font Size",commandname:"fontSize",custom:null},color:{text:"A",icon:"fa fa-font",tooltip:"Text/Background Color",commandname:null,custom:function(t){var n=e(this),o=0,l=e("<div/>",{id:"paletteCntr",class:"activeColour",css:{display:"none",width:"335px"}}).click(function(e){e.stopPropagation()}),r=e("<div/>",{id:"colorpellete"}),s=e("<ul />",{id:"color_ui"}).append(e("<li />").css({width:"145px",display:"Block",height:"25px"}).html("<div>Text Color</div>")),d=e("<div/>",{id:"bg_colorpellete"}),c=e("<ul />",{id:"bgcolor_ui"}).append(e("<li />").css({width:"145px",display:"Block",height:"25px"}).html("<div>Background Color</div>"));if(n.data("colorBtn")?(o=1,n.data("colorBtn",null)):n.data("colorBtn",1),0==o){for(var p=0;p<i.length;p++)null!=i[p].hex?(s.append(e("<li />").css("background-color",i[p].hex).mousedown(function(e){e.preventDefault()}).click(function(){var t=a.rgbToHex.apply(this,[e(this).css("background-color")]);a.restoreSelection.apply(this),a.setStyleWithCSS.apply(this),document.execCommand("forecolor",!1,t),e("#paletteCntr").remove(),n.data("colorBtn",null)})),c.append(e("<li />").css("background-color",i[p].hex).mousedown(function(e){e.preventDefault()}).click(function(){var t=a.rgbToHex.apply(this,[e(this).css("background-color")]);a.restoreSelection.apply(this),a.setStyleWithCSS.apply(this),document.execCommand("backColor",!1,t),e("#paletteCntr").remove(),n.data("colorBtn",null)}))):(s.append(e("<li />").css({width:"145px",display:"Block",height:"5px"})),c.append(e("<li />").css({width:"145px",display:"Block",height:"5px"})));s.appendTo(r),c.appendTo(d),r.appendTo(l),d.appendTo(l),l.insertAfter(t),e("#paletteCntr").slideDown("slow")}else e("#paletteCntr").remove()}},bold:{text:"B",icon:"fa fa-bold",tooltip:"Bold",commandname:"bold",custom:null},italics:{text:"I",icon:"fa fa-italic",tooltip:"Italics",commandname:"italic",custom:null},underline:{text:"U",icon:"fa fa-underline",tooltip:"Underline",commandname:"underline",custom:null},strikeout:{text:"Strikeout",icon:"fa fa-strikethrough",tooltip:"Strike Through",commandname:"strikeThrough",custom:null},ol:{text:"N",icon:"fa fa-list-ol",tooltip:"Insert/Remove Numbered List",commandname:"insertorderedlist",custom:null},ul:{text:"Bullet",icon:"fa fa-list-ul",tooltip:"Insert/Remove Bulleted List",commandname:"insertunorderedlist",custom:null},undo:{text:"undo",icon:"fa fa-undo",tooltip:"Undo",commandname:"undo",custom:null},redo:{text:"redo",icon:"fa fa-repeat",tooltip:"Redo",commandname:"redo",custom:null},l_align:{text:"leftalign",icon:"fa fa-align-left",tooltip:"Align Left",commandname:"justifyleft",custom:null},r_align:{text:"rightalign",icon:"fa fa-align-right",tooltip:"Align Right",commandname:"justifyright",custom:null},c_align:{text:"centeralign",icon:"fa fa-align-center",tooltip:"Align Center",commandname:"justifycenter",custom:null},justify:{text:"justify",icon:"fa fa-align-justify",tooltip:"Justify",commandname:"justifyfull",custom:null},unlink:{text:"Unlink",icon:"fa fa-unlink",tooltip:"Unlink",commandname:"unlink",custom:null},insert_link:{modal:!0,modalId:"InsertLink_"+e(this).attr("id"),icon:"fa fa-link",tooltip:"Insert Link",modalHeader:"Insert Hyperlink",modalBody:e("<div/>",{class:"form-group"}).append(e("<div/>",{id:"errMsg_"+e(this).attr("id")})).append(e("<input/>",{type:"text",id:"inputText_"+e(this).attr("id"),class:"form-control form-control-link ",placeholder:"Text to Display"})).append(e("<input/>",{type:"text",id:"inputUrl_"+e(this).attr("id"),required:!0,class:"form-control form-control-link",placeholder:"Enter URL"})),beforeLoad:function(){t=this;var a="_"+this.attr("id");e("#inputText"+a),e("#inputUrl"+a),e(".alert").alert("close"),""!=e(t).data("currentRange")&&e("#inputText_"+a).val(e(t).data("currentRange"))},onSave:function(){var n="_"+t.attr("id"),i=e("#inputText"+n).val(),o=e("#inputUrl"+n).val(),l=e(t).data("currentRange");if(""==o)return a.showMessage.apply(t,["errMsg","Please enter url"]),!1;if(!o.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/))return a.showMessage.apply(t,["errMsg","Enter valid url"]),!1;if(""==l&&""==i&&(i=o),navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Windows NT.*Trident\//)){var r='<a href="'+o+'" target="_blank">'+i+"</a>";a.restoreSelection.apply(t,[r,"html"])}else a.restoreSelection.apply(t,[i]),document.execCommand("createLink",!1,o);return e(t).data("editor").find('a[href="'+o+'"]').each(function(){e(this).attr("target","_blank")}),e(".alert").alert("close"),e("#InsertLink"+n).modal("hide"),e(t).data("editor").focus(),!1}},insert_img:{modal:!0,modalId:"InsertImage_"+e(this).attr("id"),icon:"fa fa-picture-o",tooltip:"Insert Image",modalHeader:"Insert Image",modalBody:a.imageWidget.apply(this),beforeLoad:function(){var a=(t=this).attr("id");e("#imageURL_"+a).val(""),e("#uploadImageBar_"+a+" :input").val(""),e("#imageList_"+a).data("current","")},onSave:function(){var n="_"+t.attr("id");if(a.restoreSelection.apply(this),!e("#imageList"+n).data("current"))return a.showMessage.apply(this,["imgErrMsg"+n,"Please select an image"]),!1;if(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Windows NT.*Trident\//)){var i='<img src="'+e("#imageList"+n).data("current")+'"/>';a.restoreSelection.apply(this,[i,"html"])}else document.execCommand("insertimage",!1,e("#imageList"+n).data("current"));e("#InsertImage"+n).modal("hide"),e(this).data("editor").focus()}},insert_table:{modal:!0,modalId:"InsertTable_"+e(this).attr("id"),icon:"fa fa-table",tooltip:"Insert Table",modalHeader:"Insert Table",modalBody:a.tableWidget.apply(this),beforeLoad:function(){e("#tblForm_"+(t=this).attr("id")).each(function(){this.reset()})},onSave:function(){_idSuffix="_"+t.attr("id"),a.restoreSelection.apply(this);var n=e("#tblRows"+_idSuffix).val(),i=e("#tblColumns"+_idSuffix).val(),o=e("#tblWidth"+_idSuffix).val(),l=e("#tblHeight"+_idSuffix).val(),r=e("#tblAlign"+_idSuffix).val(),s=e("#tblBorder"+_idSuffix).val(),d=e("#tblCellspacing"+_idSuffix).val(),c=e("#tblCellpadding"+_idSuffix).val(),p=/^[0-9]+$/,m=/^auto$|^[+-]?[0-9]+\.?([0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc)?$/gi,u=/^[0-9]+\.?([0-9])?$/;if(!n.match(p))return a.showMessage.apply(this,["tblErrMsg","Rows must be a positive number"]),!1;if(!i.match(p))return a.showMessage.apply(this,["tblErrMsg","Columns must be a positive number"]),!1;if(""!=o&&!o.match(m))return a.showMessage.apply(this,["tblErrMsg","Please enter positive number with or without a valid CSS measurement unit (px,em,ex,%,in,cm,mm,pt,pc)"]),!1;if(""!=l&&!l.match(m))return a.showMessage.apply(this,["tblErrMsg","Please enter positive number with or without a valid CSS measurement unit (px,em,ex,%,in,cm,mm,pt,pc)"]),!1;if(""!=s&&!s.match(u))return a.showMessage.apply(this,["tblErrMsg","Border size must be a positive number"]),!1;if(""!=d&&!d.match(u))return a.showMessage.apply(this,["tblErrMsg","Cell spacing must be a positive number"]),!1;if(""!=c&&!c.match(u))return a.showMessage.apply(this,["tblErrMsg","Cell padding must be a positive number"]),!1;var h=e("<div/>"),g=[{attribute:"align",value:r},{attribute:"border",value:s},{attribute:"cellspacing",value:d},{attribute:"cellpadding",value:c},{attribute:"width",value:o},{attribute:"height",value:l}];a.getHTMLTable.apply(this,[n,i,g]).appendTo(h),navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Windows NT.*Trident\//)?a.restoreSelection.apply(this,[h.html(),"html"]):document.execCommand("insertHTML",!1,h.html()),e("#InsertTable"+_idSuffix).modal("hide"),e(this).data("editor").focus()}},hr_line:{text:"HR",icon:"fa fa-minus",tooltip:"Horizontal Rule",commandname:"insertHorizontalRule",custom:null},block_quote:{text:"Block Quote",icon:"fa fa-quote-right",tooltip:"Block Quote",commandname:null,custom:function(){a.setStyleWithCSS.apply(this),navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Windows NT.*Trident\//)?document.execCommand("indent",!1,null):document.execCommand("formatBlock",!1,"<blockquote>")}},indent:{text:"Indent",icon:"fa fa-indent",tooltip:"Increase Indent",commandname:"indent",custom:null},outdent:{text:"Outdent",icon:"fa fa-outdent",tooltip:"Decrease Indent",commandname:"outdent",custom:null},print:{text:"Print",icon:"fa fa-print",tooltip:"Print",commandname:null,custom:function(){oDoc=e(this).data("editor");var t=window.open("","_blank","width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes");t.document.open(),t.document.write('<!doctype html><html><head><title>Print</title></head><body onload="print();">'+oDoc.html()+"</body></html>"),t.document.close()}},rm_format:{text:"Remove format",icon:"fa fa-eraser",tooltip:"Remove Formatting",commandname:"removeformat",custom:null},select_all:{text:"Select all",icon:"fa fa-file-text",tooltip:"Select All",commandname:null,custom:function(){document.execCommand("selectall",null,null)}},togglescreen:{text:"Toggle Screen",icon:"fa fa-arrows-alt",tooltip:"Toggle Screen",commandname:null,custom:function(t,a){e(this).data("editor").parent().toggleClass("fullscreen");var n=0;e(this).data("statusBar").length&&(n=e(this).data("statusBar").height()),e(this).data("editor").parent().hasClass("fullscreen")?e(this).data("editor").css({height:e(this).data("editor").parent().height()-(e(this).data("menuBar").height()+n)-13}):e(this).data("editor").css({height:""})}},splchars:{text:"S",icon:"fa fa-asterisk",tooltip:"Insert Special Character",commandname:null,custom:function(t){a.restoreIESelection.apply(this);var n=0,i=e("<div/>",{id:"specialchar",class:"specialCntr",css:{display:"none"}}).click(function(e){e.stopPropagation()}),l=e("<ul />",{id:"special_ui"}),r=this;if(e(this).data("editor").data("splcharsBtn")?(n=1,e(this).data("editor").data("splcharsBtn",null)):e(this).data("editor").data("splcharsBtn",1),0==n){for(var s=0;s<o.length;s++)l.append(e("<li />").html(o[s].text).attr("title",o[s].name).mousedown(function(e){e.preventDefault()}).click(function(t){if(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Windows NT.*Trident\//)){var n=e(this).html();a.insertTextAtSelection.apply(this,[n,"html"])}else document.execCommand("insertHTML",!1,e(this).html());e("#specialchar").remove(),e(r).data("editor").data("splcharsBtn",null)}));l.prependTo(i),i.insertAfter(t),e("#specialchar").slideDown("slow")}else e("#specialchar").remove()}},source:{text:"Source",icon:"fa fa-code",tooltip:"Source",commandname:null,custom:function(e,t){a.getSource.apply(this,[e,t])}},params:{obj:null}},r={texteffects:["bold","italics","underline","color"],aligneffects:["l_align","c_align","r_align","justify"],textformats:["indent","outdent","block_quote","ol","ul"],fonteffects:["fonts","styles","font_size"],actions:["undo","redo"],insertoptions:["insert_link","unlink","insert_img","insert_table"],extraeffects:["strikeout","hr_line","splchars"],advancedoptions:["print","rm_format","select_all","source"],screeneffects:["togglescreen"]},s=e.extend({texteffects:!0,aligneffects:!0,textformats:!0,fonteffects:!0,actions:!0,insertoptions:!0,extraeffects:!0,advancedoptions:!0,screeneffects:!0,bold:!0,italics:!0,underline:!0,ol:!0,ul:!0,undo:!0,redo:!0,l_align:!0,r_align:!0,c_align:!0,justify:!0,insert_link:!0,unlink:!0,insert_img:!0,hr_line:!0,block_quote:!0,source:!0,strikeout:!0,indent:!0,outdent:!0,fonts:{"Sans serif":"arial,helvetica,sans-serif",Serif:"times new roman,serif",Wide:"arial black,sans-serif",Narrow:"arial narrow,sans-serif","Comic Sans MS":"comic sans ms,sans-serif","Courier New":"courier new,monospace",Garamond:"garamond,serif",Georgia:"georgia,serif",Tahoma:"tahoma,sans-serif","Trebuchet MS":"trebuchet ms,sans-serif",Verdana:"verdana,sans-serif"},styles:{"Heading 1":"<h1>","Heading 2":"<h2>","Heading 3":"<h3>","Heading 4":"<h4>","Heading 5":"<h5>","Heading 6":"<h6>",Paragraph:"<p>"},print:!0,rm_format:!0,status_bar:!0,font_size:{Small:"2",Normal:"3",Medium:"4",Large:"5",Huge:"6"},color:i,splchars:o,insert_table:!0,select_all:!0,togglescreen:!0},n),d=e("<div/>",{class:"row-fluid Editor-container"});e(this).hide().after(d);var c=e("<div/>",{id:"menuBarDiv_"+e(this).attr("id"),class:"row-fluid line-control-menu-bar"}).prependTo(d),p=e("<div/>",{class:"Editor-editor",css:{overflow:"auto"},contenteditable:"true"}).appendTo(d),m=e("<div/>",{id:"statusbar_"+e(this).attr("id"),class:"row-fluid line-control-status-bar",unselectable:"on"}).appendTo(d);e(this).data("menuBar",c),e(this).data("editor",p),e(this).data("statusBar",m);var u=this;for(var h in s.status_bar&&p.keyup(function(t){var n=a.getWordCount.apply(u),i=a.getCharCount.apply(u);e(u).data("statusBar").html('<div class="label">Words : '+n+"</div>"),e(u).data("statusBar").append('<div class="label">Characters : '+i+"</div>")}),l)if(s[h])if(h in r){for(var g=e("<div/>",{class:"btn-group"}),f=0;f<r[h].length;f++){var x=r[h][f];if(s[x]){var v=a.createMenuItem.apply(this,[l[x],s[x],!0]);g.append(v)}s[x]=!1}c.append(g)}else{v=a.createMenuItem.apply(this,[l[h],s[h],!0]);c.append(v)}else if(s[h]in r)for(var b in r[h])s[b]=!1;p.bind("contextmenu",function(t){e("#context-menu").length&&e("#context-menu").remove();var n=e("<div/>",{id:"context-menu"}).css({position:"absolute",top:t.pageY,left:t.pageX,"z-index":9999}).click(function(e){e.stopPropagation()}),i=e("<ul/>",{class:"dropdown-menu on",role:"menu"});t.preventDefault(),e(t.target).is("a")?(a.createLinkContext.apply(this,[t,i]),i.appendTo(n),n.appendTo("body")):e(t.target).is("td")||e(t.target).is("th")?(a.createTableContext.apply(this,[t,i]),i.appendTo(n),n.appendTo("body")):e(t.target).is("img")&&(a.createImageContext.apply(this,[t,i]),i.appendTo(n),n.appendTo("body"))})},createLinkContext:function(t,a){var n;e("<li/>").append(e("<a/>",{id:"rem_link",href:"javascript:void(0)",text:"RemoveLink"}).click((n=t,function(){e(n.target).contents().unwrap(),e("#context-menu").remove()}))).appendTo(a)},createImageContext:function(n,i){var o=a.imageAttributeWidget.apply(this,["edit"]);a.createModal.apply(this,["imgAttribute","Image Attributes",o,function(){var n=e("#imgAlt").val(),i=e("#imgTarget").val();if(""==n)return a.showMessage.apply(this,["imageErrMsg","Please enter image alternative text"]),!1;if(""!=i&&!i.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/))return a.showMessage.apply(this,["imageErrMsg","Please enter valid url"]),!1;if(""!=e("#imgHidden").val()){var o=e("#imgHidden").val();e("#"+o).attr("alt",n),""!=i?e("#wrap_"+o).length?e("#wrap_"+o).attr("href",i):e("#"+o).wrap(e("<a/>",{id:"wrap_"+o,href:i,target:"_blank"})):e("#wrap_"+o).length&&e("#"+o).unwrap()}e("#imgAttribute").modal("hide"),t.data("editor").focus()}]);var l,r=e("<a/>",{href:"#imgAttribute",text:"Image Attributes","data-toggle":"modal"}).click((l=n,function(){e("#context-menu").remove();var t=(new Date).getTime();if(e("#imgAlt").val(e(l.target).closest("img").attr("alt")),e("#imgTarget").val(""),void 0!==e(l.target).closest("img").attr("id")){var a=e(l.target).closest("img").attr("id");e("#imgHidden").val(a),e("#wrap_"+a).length?e("#imgTarget").val(e("#wrap_"+a).attr("href")):e("#imgTarget").val("")}else e(l.target).closest("img").attr("id","img_"+t),e("#imgHidden").val("img_"+t)}));i.append(e("<li/>").append(r)).append(e("<li/>").append(e("<a/>",{text:"Remove Image"}).click(function(t){return function(){e("#context-menu").remove(),e(t.target).closest("img").remove()}}(n))))},createTableContext:function(n,i){var o="_"+t.attr("id")+"_Edt",l="editProperties_"+t.attr("id");e("#"+l).remove();var r=a.tableWidget.apply(this,["edit"]);a.createModal.apply(this,[l,"Table Properties",r,function(){var i=e("#tblWidth"+o).val(),r=e("#tblHeight"+o).val(),s=e("#tblBorder"+o).val(),d=e("#tblAlign"+o).val(),c=e("#tblCellspacing"+o).val(),p=e("#tblCellpadding"+o).val(),m=/^auto$|^[+-]?[0-9]+\.?([0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc)?$/gi,u=/^[0-9]+\.?([0-9])?$/;return""!=i&&!i.match(m)||""!=r&&!r.match(m)?(a.showMessage.apply(this,["tblErrMsgEdt","Please enter positive number with or without a valid CSS measurement unit (px,em,ex,%,in,cm,mm,pt,pc)"]),!1):""==s||s.match(u)?""==c||c.match(u)?""==p||p.match(u)?(e(n.target).closest("table").css("width",i),""!=r&&e(n.target).closest("table").css("height",r),e(n.target).closest("table").attr("align",d),e(n.target).closest("table").attr("border",s),e(n.target).closest("table").attr("cellspacing",c),e(n.target).closest("table").attr("cellpadding",p),e("#"+l).modal("hide"),void t.data("editor").focus()):(a.showMessage.apply(this,["tblErrMsgEdt","Cell padding must be a positive number"]),!1):(a.showMessage.apply(this,["tblErrMsgEdt","Cell spacing must be a positive number"]),!1):(a.showMessage.apply(this,["tblErrMsgEdt","Border size must be a positive number"]),!1)}]);var s,d=e("<a/>",{href:"#"+l,text:"Table Properties","data-toggle":"modal"}).click((s=n,function(){var a="_"+t.attr("id")+"_Edt";e("#context-menu").remove(),e("#tblRows"+a).val(e(s.target).closest("table").prop("rows").length),e("#tblColumns"+a).val(e(s.target).closest("table").find("tr")[0].cells.length),e("#tblRows"+a).attr("disabled","disabled"),e("#tblColumns"+a).attr("disabled","disabled"),e("#tblWidth"+a).val(e(s.target).closest("table").get(0).style.width),e("#tblHeight"+a).val(e(s.target).closest("table").get(0).style.height),e("#tblAlign"+a).val(e(s.target).closest("table").attr("align")),e("#tblBorder"+a).val(e(s.target).closest("table").attr("border")),e("#tblCellspacing"+a).val(e(s.target).closest("table").attr("cellspacing")),e("#tblCellpadding"+a).val(e(s.target).closest("table").attr("cellpadding"))}));i.append(e("<li/>",{class:"dropdown-submenu",css:{display:"block"}}).append(e("<a/>",{tabindex:"-1",href:"javascript:void(0)",text:"Row"})).append(e("<ul/>",{class:"dropdown-menu"}).append(e("<li/>").append(e("<a/>",{id:"tbl_addrow",href:"javascript:void(0)",text:"Add Row"}).click(function(t){return function(){e("#context-menu").remove();var a=e(t.target).closest("tr"),n=e("<tr/>");a.children().each(function(){var t=e("<"+e(this).prop("nodeName")+"/>").html("&nbsp;");n.append(t)}),a.after(n)}}(n)))).append(e("<li/>").append(e("<a/>",{text:"Remove Row"}).click(function(t){return function(){e("#context-menu").remove(),e(t.target).closest("tr").remove()}}(n)))))).append(e("<li/>",{class:"dropdown-submenu",css:{display:"block"}}).append(e("<a/>",{tabindex:"-1",href:"javascript:void(0)",text:"Column"})).append(e("<ul/>",{class:"dropdown-menu"}).append(e("<li/>").append(e("<a/>",{id:"tbl_addcolumn",href:"javascript:void(0)",text:"Add Column"}).click(function(t){return function(){e("#context-menu").remove();var a=e(t.target),n=a.siblings().addBack().index(a);a.closest("table").find("tr").each(function(){var t=e(this).children(":eq("+n+")"),a=e("<"+t.prop("nodeName")+"/>").html("&nbsp;");t.after(a)})}}(n)))).append(e("<li/>").append(e("<a/>",{text:"Remove Column"}).click(function(t){return function(){e("#context-menu").remove();var a=e(t.target),n=a.siblings().addBack().index(a);a.closest("table").find("tr").each(function(){e(this).children(":eq("+n+")").remove()})}}(n)))))),i.append(e("<li/>").append(d)).append(e("<li/>",{class:"divider"})).append(e("<li/>").append(e("<a/>",{text:"Remove Table"}).click(function(t){return function(){e("#context-menu").remove(),e(t.target).closest("table").remove()}}(n))))},createModal:function(t,a,n,i){var o,l=e("<a/>",{href:"#"+t,role:"button",class:"btn btn-default","data-toggle":"modal"});return e("<div/>",{id:t,class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"h3_"+t,"aria-hidden":"true"}).append(e("<div>",{class:"modal-dialog"}).append(e("<div>",{class:"modal-content"}).append(e("<div>",{class:"modal-header"}).append(e("<button/>",{type:"button",class:"close","data-dismiss":"modal","aria-hidden":"true"}).html("x")).append(e("<h3/>",{id:"h3_"+t}).html(a))).append(e("<div>",{class:"modal-body"}).append(n)).append(e("<div>",{class:"modal-footer"}).append(e("<button/>",{type:"button",class:"btn btn-default","data-dismiss":"modal","aria-hidden":"true"}).html("Cancel")).append(e("<button/>",{type:"button",class:"btn btn-success"}).html("Done").mousedown(function(e){e.preventDefault()}).click((o=this,function(){i.apply(o)})))))).appendTo("body"),l},createMenuItem:function(t,n,i){if(t.select){var o=e("<div/>",{class:"btn-group"}),l=e("<ul/>",{class:"dropdown-menu"});o.append(e("<a/>",{class:"btn btn-default dropdown-toggle","data-toggle":"dropdown",href:"javascript:void(0)",title:t.tooltip}).html(t.default).append(e("<span/>",{class:"caret"})).mousedown(function(e){e.preventDefault()})),e.each(n,function(t,a){var n=e("<li/>");e("<a/>",{tabindex:"-1",href:"javascript:void(0)"}).html(t).appendTo(n),n.click(function(){e(this).parent().parent().data("value",a),e(this).parent().parent().trigger("change")}),l.append(n)});var r="change"}else{if(t.modal){o=a.createModal.apply(this,[t.modalId,t.modalHeader,t.modalBody,t.onSave]),l=e("<i/>");return t.icon?l.addClass(t.icon):l.html(t.text),o.append(l),o.mousedown(function(e,t,a){return function(n){n.preventDefault(),t.saveSelection.apply(e),a&&a.apply(e)}}(this,a,t.beforeLoad)),o.attr("title",t.tooltip),o}o=e("<a/>",{href:"javascript:void(0)",class:"btn btn-default"}),l=e("<i/>");t.icon?l.addClass(t.icon):l.html(t.text);r="click"}var s,d;if(t.custom?o.bind(r,(s=this,d=t.params,function(){a.saveSelection.apply(s),t.custom.apply(s,[e(this),d])})):(o.data("commandName",t.commandname),o.data("editor",e(this).data("editor")),o.bind(r,function(){a.setTextFormat.apply(this)})),o.attr("title",t.tooltip),o.css("cursor","pointer"),o.append(l),i)return o;e(this).data("menuBar").append(o)},setTextFormat:function(){return a.setStyleWithCSS.apply(this),document.execCommand(e(this).data("commandName"),!1,e(this).data("value")||null),e(this).data("editor").focus(),!1},getSource:function(t,a){var n=0;t.data("state")?(n=1,t.data("state",null)):t.data("state",1),e(this).data("source-mode",!n);var i,o=e(this).data("editor");if(0==n)i=document.createTextNode(o.html()),o.empty(),o.attr("contenteditable",!1),preElement=e("<pre/>",{contenteditable:!0}),preElement.append(i),o.append(preElement),t.parent().siblings().hide(),t.siblings().hide();else{var l=o.children().first().text();o.html(l),o.attr("contenteditable",!0),t.parent().siblings().show(),t.siblings().show()}},countWords:function(t){for(var n=0,i=t.contents().filter(function(){return 3==this.nodeType}),o=0;o<i.length;o++)text=i[o].textContent,text=text.replace(/[^-\w\s]/gi," "),text=e.trim(text),n+=text.split(/\s+/).length;t.children().each(function(){n+=a.countWords.apply(this,[e(this)])});return n},countChars:function(t){for(var n=0,i=t.contents().filter(function(){return 3==this.nodeType}),o=0;o<i.length;o++)text=i[o].textContent,n+=text.length;t.children().each(function(){n+=a.countChars.apply(this,[e(this)])});return n},getWordCount:function(){return a.countWords.apply(this,[e(this).data("editor")])},getCharCount:function(){return a.countChars.apply(this,[e(this).data("editor")])},rgbToHex:function(e){return e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2)},showMessage:function(t,a){e("<div/>",{class:"alert alert-danger"}).append(e("<button/>",{type:"button",class:"close","data-dismiss":"alert",html:"x"})).append(e("<span/>").html(a)).appendTo(e("#"+t)),setTimeout(function(){e(".alert").alert("close")},3e3)},getText:function(){return e(this).data("source-mode")?e(this).data("editor").children().first().text():e(this).data("editor").html()},setText:function(t){e(this).data("source-mode")?e(this).data("editor").children().first().text(t):e(this).data("editor").html(t)},setStyleWithCSS:function(){if(navigator.userAgent.match(/MSIE/i))try{Editor.execCommand("styleWithCSS",0,!1)}catch(e){try{Editor.execCommand("useCSS",0,!0)}catch(e){try{Editor.execCommand("styleWithCSS",!1,!1)}catch(e){}}}else document.execCommand("styleWithCSS",null,!0)}};e.fn.Editor=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.Editor"):a.init.apply(this,arguments)}}(jQuery);